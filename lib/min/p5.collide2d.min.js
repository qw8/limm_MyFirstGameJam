p5.prototype._collideDebug=!1,p5.prototype.collideDebug=function(a){_collideDebug=a},p5.prototype.collideRectRect=function(a,b,c,d,e,f,g,h){return a+c>=e&&a<=e+g&&b+d>=f&&b<=f+h},p5.prototype.collideRectCircle=function(a,b,c,d,e,f,g){var h=e,i=f;e<a?h=a:e>a+c&&(h=a+c),f<b?i=b:f>b+d&&(i=b+d);var j=dist(e,f,h,i);return j<=g/2},p5.prototype.collideCircleCircle=function(a,b,c,d,e,f){return dist(a,b,d,e)<=c/2+f/2},p5.prototype.collidePointCircle=function(a,b,c,d,e){return dist(a,b,c,d)<=e/2},p5.prototype.collidePointRect=function(a,b,c,d,e,f){return a>=c&&a<=c+e&&b>=d&&b<=d+f},p5.prototype.collidePointLine=function(a,b,c,d,e,f,g){var h=dist(a,b,c,d),i=dist(a,b,e,f),j=dist(c,d,e,f);return void 0===g&&(g=.1),h+i>=j-g&&h+i<=j+g},p5.prototype.collideLineCircle=function(a,b,c,d,e,f,g){var h=collidePointCircle(a,b,e,f,g),i=collidePointCircle(c,d,e,f,g);if(h||i)return!0;var j=a-c,k=b-d,l=sqrt(j*j+k*k),m=((e-a)*(c-a)+(f-b)*(d-b))/pow(l,2),n=a+m*(c-a),o=b+m*(d-b),p=collidePointLine(n,o,a,b,c,d);if(!p)return!1;_collideDebug&&ellipse(n,o,10,10),j=n-e,k=o-f;var q=sqrt(j*j+k*k);return q<=g/2},p5.prototype.collideLineLine=function(a,b,c,d,e,f,g,h,i){var j,k=((g-e)*(b-f)-(h-f)*(a-e))/((h-f)*(c-a)-(g-e)*(d-b)),l=((c-a)*(b-f)-(d-b)*(a-e))/((h-f)*(c-a)-(g-e)*(d-b));if(k>=0&&k<=1&&l>=0&&l<=1){if(_collideDebug||i)var m=a+k*(c-a),n=b+k*(d-b);return _collideDebug&&ellipse(m,n,10,10),!i||(j={x:m,y:n})}return!!i&&(j={x:!1,y:!1})},p5.prototype.collideLineRect=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n;return i?(j=collideLineLine(a,b,c,d,e,f,e,f+h,!0),k=collideLineLine(a,b,c,d,e+g,f,e+g,f+h,!0),l=collideLineLine(a,b,c,d,e,f,e+g,f,!0),m=collideLineLine(a,b,c,d,e,f+h,e+g,f+h,!0),n={left:j,right:k,top:l,bottom:m}):(j=collideLineLine(a,b,c,d,e,f,e,f+h),k=collideLineLine(a,b,c,d,e+g,f,e+g,f+h),l=collideLineLine(a,b,c,d,e,f,e+g,f),m=collideLineLine(a,b,c,d,e,f+h,e+g,f+h)),!!(j||k||l||m)&&(!i||n)},p5.prototype.collidePointPoly=function(a,b,c){for(var d=!1,e=0,f=0;f<c.length;f++){e=f+1,e==c.length&&(e=0);var g=c[f],h=c[e];(g.y>b&&h.y<b||g.y<b&&h.y>b)&&a<(h.x-g.x)*(b-g.y)/(h.y-g.y)+g.x&&(d=!d)}return d},p5.prototype.collideCirclePoly=function(a,b,c,d,e){void 0==e&&(e=!1);for(var f=0,g=0;g<d.length;g++){f=g+1,f==d.length&&(f=0);var h=d[g],i=d[f],j=collideLineCircle(h.x,h.y,i.x,i.y,a,b,c);if(j)return!0}if(1==e){var k=collidePointPoly(a,b,d);if(k)return!0}return!1},p5.prototype.collideRectPoly=function(a,b,c,d,e,f){void 0==f&&(f=!1);for(var g=0,h=0;h<e.length;h++){g=h+1,g==e.length&&(g=0);var i=e[h],j=e[g],k=collideLineRect(i.x,i.y,j.x,j.y,a,b,c,d);if(k)return!0;if(1==f){var l=collidePointPoly(a,b,e);if(l)return!0}}return!1},p5.prototype.collideLinePoly=function(a,b,c,d,e){for(var f=0,g=0;g<e.length;g++){f=g+1,f==e.length&&(f=0);var h=e[g].x,i=e[g].y,j=e[f].x,k=e[f].y,l=collideLineLine(a,b,c,d,h,i,j,k);if(l)return!0}return!1},p5.prototype.collidePolyPoly=function(a,b,c){void 0==c&&(c=!1);for(var d=0,e=0;e<a.length;e++){d=e+1,d==a.length&&(d=0);var f=a[e],g=a[d],h=collideLinePoly(f.x,f.y,g.x,g.y,b);if(h)return!0;if(1==c&&(h=collidePointPoly(b[0].x,b[0].y,a)))return!0}return!1},p5.prototype.collidePointTriangle=function(a,b,c,d,e,f,g,h){var i=abs((e-c)*(h-d)-(g-c)*(f-d)),j=abs((c-a)*(f-b)-(e-a)*(d-b)),k=abs((e-a)*(h-b)-(g-a)*(f-b)),l=abs((g-a)*(d-b)-(c-a)*(h-b));return j+k+l==i},p5.prototype.collidePointPoint=function(a,b,c,d,e){return void 0==e&&(e=0),dist(a,b,c,d)<=e};